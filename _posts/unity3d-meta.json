{
  "$$data_type": "org-document",
  "properties": {
    "title": ["Keep Unity3d meta files in sync"],
    "filetags": [],
    "author": ["Michael McFarland"],
    "creator": "Emacs 28.0.60 (Org mode 9.6)",
    "date": ["2015-06-16"],
    "description": [],
    "email": "michaelmcfarland@michaels-air.lan",
    "language": "en"
  },
  "contents": [
    {
      "$$data_type": "org-node",
      "type": "section",
      "ref": "orgbc550c9",
      "properties": {
        "robust-begin": 1,
        "robust-end": 423,
        "post-blank": 1,
        "post-affiliated": 1,
        "mode": "first-section",
        "granularity": null
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "keyword",
          "ref": "org86ea7c8",
          "properties": {
            "key": "STARTUP",
            "value": "showall indent",
            "post-blank": 0,
            "post-affiliated": 1,
            "mode": "top-comment",
            "granularity": null
          },
          "contents": []
        },
        {
          "$$data_type": "org-node",
          "type": "keyword",
          "ref": "orgf06643e",
          "properties": {
            "key": "OPTIONS",
            "value": "num:nil",
            "post-blank": 0,
            "post-affiliated": 27,
            "mode": null,
            "granularity": null
          },
          "contents": []
        },
        {
          "$$data_type": "org-node",
          "type": "keyword",
          "ref": "org768aa91",
          "properties": {
            "key": "TITLE",
            "value": "Keep Unity3d meta files in sync",
            "post-blank": 0,
            "post-affiliated": 46,
            "mode": null,
            "granularity": null
          },
          "contents": []
        },
        {
          "$$data_type": "org-node",
          "type": "keyword",
          "ref": "orgee2505a",
          "properties": {
            "key": "DATE",
            "value": "2015-06-16",
            "post-blank": 0,
            "post-affiliated": 87,
            "mode": null,
            "granularity": null
          },
          "contents": []
        },
        {
          "$$data_type": "org-node",
          "type": "keyword",
          "ref": "org635ec99",
          "properties": {
            "key": "CATEGORY",
            "value": "code",
            "post-blank": 1,
            "post-affiliated": 106,
            "mode": null,
            "granularity": null
          },
          "contents": []
        },
        {
          "$$data_type": "org-node",
          "type": "paragraph",
          "ref": "org9daa752",
          "properties": {
            "post-blank": 0,
            "post-affiliated": 124,
            "mode": null,
            "granularity": null
          },
          "contents": [
            "If you've ever worked on a team using Unity3d, somebody has forgotten to commit a .meta file.\nIt's fairly easy to do, and pretty hard to notice you're doing it (things still work for you).\nI've been bitten by this mistake plenty, from myself and others.\nIt really sucks, but there's an easy solution.\n"
          ]
        }
      ]
    },
    {
      "$$data_type": "org-node",
      "type": "headline",
      "ref": "org2e88eed",
      "drawer": {},
      "properties": {
        "tags-all": [],
        "raw-value": "Why this is a problem",
        "pre-blank": 0,
        "robust-begin": 452,
        "robust-end": 719,
        "level": 1,
        "priority": null,
        "tags": [],
        "todo-keyword": null,
        "todo-type": null,
        "post-blank": 1,
        "footnote-section-p": false,
        "archivedp": false,
        "commentedp": false,
        "post-affiliated": 426,
        "title": ["Why this is a problem"],
        "mode": null,
        "granularity": null
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "section",
          "ref": "orge82ed75",
          "properties": {
            "robust-begin": 450,
            "robust-end": 719,
            "post-blank": 1,
            "post-affiliated": 450,
            "mode": "section",
            "granularity": null
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "org67c4f8d",
              "properties": {
                "post-blank": 0,
                "post-affiliated": 450,
                "mode": "planning",
                "granularity": null
              },
              "contents": [
                "The .meta file holds GUID for the given asset, which is how the editor associates assets for serialized data (your prefabs and scenes).\nWhen you're serialized data references the wrong id, then you get missing references that show up like \"Missing Script\" in the editor.\n"
              ]
            }
          ]
        }
      ]
    },
    {
      "$$data_type": "org-node",
      "type": "headline",
      "ref": "org67117a3",
      "drawer": {},
      "properties": {
        "tags-all": [],
        "raw-value": "What looks like",
        "pre-blank": 0,
        "robust-begin": 742,
        "robust-end": 2294,
        "level": 1,
        "priority": null,
        "tags": [],
        "todo-keyword": null,
        "todo-type": null,
        "post-blank": 2,
        "footnote-section-p": false,
        "archivedp": false,
        "commentedp": false,
        "post-affiliated": 722,
        "title": ["What looks like"],
        "mode": null,
        "granularity": null
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "section",
          "ref": "orgf3caadf",
          "properties": {
            "robust-begin": 740,
            "robust-end": 2294,
            "post-blank": 2,
            "post-affiliated": 740,
            "mode": "section",
            "granularity": null
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "orgc5172bf",
              "properties": {
                "post-blank": 0,
                "post-affiliated": 740,
                "mode": "planning",
                "granularity": null
              },
              "contents": ["Lets say we have two developers, Bob and Sue.\n"]
            },
            {
              "$$data_type": "org-node",
              "type": "plain-list",
              "ref": "org38068e6",
              "properties": {
                "type": "unordered",
                "structure": [
                  [786, 0, "- ", null, null, null, 831],
                  [831, 0, "- ", null, null, null, 897],
                  [897, 0, "- ", null, null, null, 948],
                  [948, 0, "- ", null, null, null, 1011],
                  [1011, 0, "- ", null, null, null, 1101]
                ],
                "post-blank": 1,
                "post-affiliated": 786,
                "mode": null,
                "granularity": null
              },
              "contents": [
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org8c82d91",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 786,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org9758666",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 788,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Bob creates a new behaviour called Foo.cs.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "orgd2bb858",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 831,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgb1dcda5",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 833,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Unity automatically generates Foo.cs.meta with a new unique ID.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "orga94912f",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 897,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgc079959",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 899,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Bob adds and pushes Foo.cs, but not Foo.cs.meta.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org0f7c2db",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 948,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgf664441",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 950,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Sue pulls down the code, and Foo.cs is added to her project.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org4c912e3",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1011,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgd3d781f",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1013,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Unity generates a Foo.cs.meta with a ",
                        {
                          "$$data_type": "org-node",
                          "type": "bold",
                          "ref": "org47e28bd",
                          "properties": {
                            "post-blank": 1
                          },
                          "contents": ["new"]
                        },
                        "unique ID (different then Bob's Foo.cs.meta)\n"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "org51d3510",
              "properties": {
                "post-blank": 1,
                "post-affiliated": 1102,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "Now Bob and Sue have their own IDs for the asset. At best, whoever pushes their meta second\nwill have a merge conflict (Which you then need to resolve by not merging! Choose one or the other.)\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "orga321853",
              "properties": {
                "post-blank": 0,
                "post-affiliated": 1296,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "But often it's not caught until later, and something like this happens next:\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "plain-list",
              "ref": "org95d70c4",
              "properties": {
                "type": "unordered",
                "structure": [
                  [1373, 0, "- ", null, null, null, 1441],
                  [1441, 0, "- ", null, null, null, 1509],
                  [1509, 0, "- ", null, null, null, 1563],
                  [1563, 0, "- ", null, null, null, 1601],
                  [1601, 0, "- ", null, null, null, 1630],
                  [1630, 0, "- ", null, null, null, 1829],
                  [1684, 2, "- ", null, null, null, 1756],
                  [1756, 2, "- ", null, null, null, 1829],
                  [1829, 0, "- ", null, null, null, 1886]
                ],
                "post-blank": 1,
                "post-affiliated": 1373,
                "mode": null,
                "granularity": null
              },
              "contents": [
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org2d2edf1",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1373,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org12ec0f8",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1375,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Bob creates a new prefab Bob.prefab, which has the behaviour Foo.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org92be3fc",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1441,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org5f77659",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1443,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Sue creates a new prefab Sue.prefab, which has the behaviour Foo.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org612bd8e",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1509,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org044f67c",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1511,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Each prefab is referencing Foo with a different ID.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "orga3550a1",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1563,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org35f2166",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1565,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": ["Bob adds and pushes his Bob.prefab.\n"]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org0429b91",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1601,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org183389e",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1603,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": ["Sue pushes her Sue.prefab.\n"]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "orgc7a4563",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1630,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org8b69983",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1632,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Bob pulls, get's a merge conflict with Foo.cs.meta.\n"
                      ]
                    },
                    {
                      "$$data_type": "org-node",
                      "type": "plain-list",
                      "ref": "orgd10884f",
                      "properties": {
                        "type": "unordered",
                        "structure": [
                          [1373, 0, "- ", null, null, null, 1441],
                          [1441, 0, "- ", null, null, null, 1509],
                          [1509, 0, "- ", null, null, null, 1563],
                          [1563, 0, "- ", null, null, null, 1601],
                          [1601, 0, "- ", null, null, null, 1630],
                          [1630, 0, "- ", null, null, null, 1829],
                          [1684, 2, "- ", null, null, null, 1756],
                          [1756, 2, "- ", null, null, null, 1829],
                          [1829, 0, "- ", null, null, null, 1886]
                        ],
                        "post-blank": 0,
                        "post-affiliated": 1684,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        {
                          "$$data_type": "org-node",
                          "type": "item",
                          "ref": "org1bcfa2e",
                          "properties": {
                            "bullet": "- ",
                            "checkbox": null,
                            "counter": null,
                            "pre-blank": 0,
                            "post-blank": 0,
                            "post-affiliated": 1684,
                            "tag": [],
                            "mode": "item",
                            "granularity": null
                          },
                          "contents": [
                            {
                              "$$data_type": "org-node",
                              "type": "paragraph",
                              "ref": "orgcef4981",
                              "properties": {
                                "post-blank": 0,
                                "post-affiliated": 1688,
                                "mode": null,
                                "granularity": null
                              },
                              "contents": [
                                "If he resolves with ",
                                {
                                  "$$data_type": "org-node",
                                  "type": "bold",
                                  "ref": "orgcab17ed",
                                  "properties": {
                                    "post-blank": 1
                                  },
                                  "contents": ["his"]
                                },
                                "he gets a \"Missing Script\" on Sue.prefab.\n"
                              ]
                            }
                          ]
                        },
                        {
                          "$$data_type": "org-node",
                          "type": "item",
                          "ref": "org6783c57",
                          "properties": {
                            "bullet": "- ",
                            "checkbox": null,
                            "counter": null,
                            "pre-blank": 0,
                            "post-blank": 0,
                            "post-affiliated": 1756,
                            "tag": [],
                            "mode": "item",
                            "granularity": null
                          },
                          "contents": [
                            {
                              "$$data_type": "org-node",
                              "type": "paragraph",
                              "ref": "org0671b4c",
                              "properties": {
                                "post-blank": 0,
                                "post-affiliated": 1760,
                                "mode": null,
                                "granularity": null
                              },
                              "contents": [
                                "If he resolves with ",
                                {
                                  "$$data_type": "org-node",
                                  "type": "bold",
                                  "ref": "org4d09e26",
                                  "properties": {
                                    "post-blank": 1
                                  },
                                  "contents": ["hers"]
                                },
                                "he gets a \"Missing Script\" on Bob.prefab.\n"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org614a346",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 1829,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "org78bbc7e",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 1831,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "Sue pulls, and see's a \"Missing Script\" on Bob.prefab.\n"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "orgcef5202",
              "properties": {
                "post-blank": 0,
                "post-affiliated": 1887,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "Add a few more developers into the mix and you can easily have a more complicated example,\nWhere people have repeated \"fixed\" the meta only to cause a different reference to go missing.\nAnd it can happen to more then just scripts, materials and prefabs can also have faulty references.\nFiguring these things out requires too much time, and it's not that fun to explain to new developers (especially artists).\n"
              ]
            }
          ]
        }
      ]
    },
    {
      "$$data_type": "org-node",
      "type": "headline",
      "ref": "orgeb26f66",
      "drawer": {},
      "properties": {
        "tags-all": [],
        "raw-value": "A solution",
        "pre-blank": 0,
        "robust-begin": 2313,
        "robust-end": 5130,
        "level": 1,
        "priority": null,
        "tags": [],
        "todo-keyword": null,
        "todo-type": null,
        "post-blank": 2,
        "footnote-section-p": false,
        "archivedp": false,
        "commentedp": false,
        "post-affiliated": 2298,
        "title": ["A solution"],
        "mode": null,
        "granularity": null,
        "cached": true,
        "org-element--cache-sync-key": [13]
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "section",
          "ref": "org18dc156",
          "properties": {
            "robust-begin": 2311,
            "robust-end": 5130,
            "post-blank": 2,
            "post-affiliated": 2311,
            "mode": "section",
            "granularity": null
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "orgee57133",
              "properties": {
                "post-blank": 1,
                "post-affiliated": 2311,
                "mode": "planning",
                "granularity": null
              },
              "contents": [
                "Solve it with software, don't let people share assets without metas.\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "org5c50f59",
              "properties": {
                "post-blank": 1,
                "post-affiliated": 2381,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "Most version control systems have hooks that you can run your own scripts in,\nMercurials no different.\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "org75ce96e",
              "properties": {
                "post-blank": 1,
                "post-affiliated": 2485,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "You can make a pre-commit hook that will look at all your assets\nand make sure none are missing a meta.\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "paragraph",
              "ref": "org3a62fed",
              "properties": {
                "post-blank": 1,
                "post-affiliated": 2590,
                "mode": null,
                "granularity": null
              },
              "contents": [
                "I've made one below. It's worked fine for windows and mac machines,\nand some version of it has been in every unity project I've done since.\n"
              ]
            },
            {
              "$$data_type": "org-node",
              "type": "src-block",
              "ref": "org7cdcc02",
              "properties": {
                "language": "python",
                "switches": null,
                "parameters": null,
                "number-lines": null,
                "preserve-indent": false,
                "retain-labels": true,
                "use-labels": true,
                "label-fmt": null,
                "value": "  import os\n  import mercurial.commands\n\n  class HG:\n    def __init__(self,ui,repo):\n      self.ui = ui\n      self.repo = repo\n      self.files = self.getAddedFiles()\n\n    def existsInRepo(self, filename):\n      self.ui.pushbuffer()\n      mercurial.commands.locate(self.ui,self.repo,include=[filename])\n      files = self.ui.popbuffer().split(\"\\n\")\n\n      for repoFile in files:\n        if(pathsEqual(filename,repoFile)):\n          return True\n\n      return False\n\n    def getAddedFiles(self):\n      self.ui.pushbuffer()\n      mercurial.commands.status(self.ui,self.repo,no_status=True, added = True)\n      files = self.ui.popbuffer().split(\"\\n\")\n      return files\n\n    def filesExistInDir(self,dirname):\n      self.ui.pushbuffer()\n      mercurial.commands.locate(self.ui,self.repo,include=[dirname])\n      files = self.ui.popbuffer().split(\"\\n\")\n      files = filter(lambda x:x != \"\", files)\n      return len(files) > 0\n\n    def show(self, message):\n      self.ui.status(message + \"\\n\")\n\n  def precommit(ui,repo, **kwargs):\n    hg = HG(ui,repo)\n    clean = checkFiles(hg)\n    return not clean;\n\n  def pathsEqual(a,b):\n    return os.path.normcase(a) == os.path.normcase(b)\n\n\n  def checkFiles(hg):\n\n    path = os.path.normcase(\"UnityProject/Assets/\")\n\n    result = True\n    files = hg.files\n    for singleFile in files:\n      if singleFile == '':\n        continue\n\n      if not os.path.normcase(singleFile).startswith(path):\n        continue\n\n      isMetaFile = singleFile.endswith(\".meta\")\n\n      filename = singleFile if not isMetaFile else singleFile.replace(\".meta\", \"\")\n      metaFile = singleFile if isMetaFile else singleFile + \".meta\"\n\n      isFolder = os.path.isdir(os.path.normcase(filename))\n\n      if isMetaFile:\n        if isFolder:\n          if not hg.filesExistInDir(filename):\n            hg.show(\"Commiting a meta file'\" + metaFile +\n              \"' for a directory which contains no files.\" )\n            return False\n        else:\n          if not hg.existsInRepo(filename):\n            hg.show(\"Commiting a meta file'\" + metaFile +\n              \"' without adding associated file '\" + filename + \"'.\")\n            return False\n\n      else:\n        if not hg.existsInRepo(metaFile):\n          hg.show(\"Committing a file '\" + filename +\n            \"' without adding associated meta file '\" + metaFile + \"'.\")\n          return False\n\n\n    return result\n",
                "post-blank": 0,
                "post-affiliated": 2731,
                "mode": null,
                "granularity": null
              },
              "contents": []
            }
          ]
        }
      ]
    },
    {
      "$$data_type": "org-node",
      "type": "headline",
      "ref": "org785e675",
      "drawer": {},
      "properties": {
        "tags-all": [],
        "raw-value": "Installation",
        "pre-blank": 0,
        "robust-begin": 5151,
        "robust-end": 6047,
        "level": 1,
        "priority": null,
        "tags": [],
        "todo-keyword": null,
        "todo-type": null,
        "post-blank": 2,
        "footnote-section-p": false,
        "archivedp": false,
        "commentedp": false,
        "post-affiliated": 5134,
        "title": ["Installation"],
        "mode": null,
        "granularity": null,
        "cached": true,
        "org-element--cache-sync-key": [23]
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "headline",
          "ref": "org561f263",
          "drawer": {},
          "properties": {
            "tags-all": [],
            "raw-value": "Configure your asset folder path",
            "pre-blank": 1,
            "robust-begin": 5188,
            "robust-end": 5479,
            "level": 2,
            "priority": null,
            "tags": [],
            "todo-keyword": null,
            "todo-type": null,
            "post-blank": 1,
            "footnote-section-p": false,
            "archivedp": false,
            "commentedp": false,
            "post-affiliated": 5149,
            "title": ["Configure your asset folder path"],
            "mode": "section",
            "granularity": null
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "section",
              "ref": "org586f4bb",
              "properties": {
                "robust-begin": 5186,
                "robust-end": 5479,
                "post-blank": 1,
                "post-affiliated": 5186,
                "mode": "section",
                "granularity": null
              },
              "contents": [
                {
                  "$$data_type": "org-node",
                  "type": "paragraph",
                  "ref": "org1fb687b",
                  "properties": {
                    "post-blank": 0,
                    "post-affiliated": 5186,
                    "mode": "planning",
                    "granularity": null
                  },
                  "contents": [
                    "in ",
                    {
                      "$$data_type": "org-node",
                      "type": "verbatim",
                      "ref": "org4cf9725",
                      "properties": {
                        "post-blank": 1,
                        "value": "checkFiles"
                      },
                      "contents": []
                    },
                    "alter the ",
                    {
                      "$$data_type": "org-node",
                      "type": "verbatim",
                      "ref": "org4e5f303",
                      "properties": {
                        "post-blank": 1,
                        "value": "path"
                      },
                      "contents": []
                    },
                    "variable so that it points to your assets directory.\nThe current value reflects my projects, which generally have the unity project folder start at the path ",
                    {
                      "$$data_type": "org-node",
                      "type": "verbatim",
                      "ref": "orgc29a6ef",
                      "properties": {
                        "post-blank": 0,
                        "value": "UnityProject"
                      },
                      "contents": []
                    },
                    ".\nThe script only checks the files under that path, and it's relative to your repo's root.\n"
                  ]
                }
              ]
            }
          ]
        },
        {
          "$$data_type": "org-node",
          "type": "headline",
          "ref": "orgd184a72",
          "drawer": {},
          "properties": {
            "tags-all": [],
            "raw-value": "Add the hook",
            "pre-blank": 0,
            "robust-begin": 5500,
            "robust-end": 6047,
            "level": 2,
            "priority": null,
            "tags": [],
            "todo-keyword": null,
            "todo-type": null,
            "post-blank": 2,
            "footnote-section-p": false,
            "archivedp": false,
            "commentedp": false,
            "post-affiliated": 5482,
            "title": ["Add the hook"],
            "mode": null,
            "granularity": null,
            "cached": true,
            "org-element--cache-sync-key": [23]
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "section",
              "ref": "org7a16227",
              "properties": {
                "robust-begin": 5498,
                "robust-end": 6047,
                "post-blank": 2,
                "post-affiliated": 5498,
                "mode": "section",
                "granularity": null
              },
              "contents": [
                {
                  "$$data_type": "org-node",
                  "type": "paragraph",
                  "ref": "org89b8e47",
                  "properties": {
                    "post-blank": 1,
                    "post-affiliated": 5498,
                    "mode": "planning",
                    "granularity": null
                  },
                  "contents": [
                    "Mercurial needs you to ",
                    {
                      "$$data_type": "org-node",
                      "type": "link",
                      "ref": "org49c255a",
                      "properties": {
                        "type": "https",
                        "path": "//mercurial.selenic.com/wiki/Hook",
                        "format": "bracket",
                        "raw-link": "https://mercurial.selenic.com/wiki/Hook",
                        "application": null,
                        "search-option": null,
                        "post-blank": 1,
                        "is-internal": false,
                        "target-ref": null,
                        "is-inline-image": false
                      },
                      "contents": ["register the hook"]
                    },
                    "in your hg config.\nEveryone on the team should register and use this pre-commit hook in order for it to be effective.\nI keep them in hooks directory for the project for that reason.\n"
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "paragraph",
                  "ref": "org50ceb27",
                  "properties": {
                    "post-blank": 1,
                    "post-affiliated": 5767,
                    "mode": null,
                    "granularity": null
                  },
                  "contents": [
                    "For example, Lets say you saved the above script to a file in your repo at ",
                    {
                      "$$data_type": "org-node",
                      "type": "verbatim",
                      "ref": "org621f9c8",
                      "properties": {
                        "post-blank": 0,
                        "value": "hooks/checkMetas.py"
                      },
                      "contents": []
                    },
                    ".\n"
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "paragraph",
                  "ref": "org740b404",
                  "properties": {
                    "post-blank": 1,
                    "post-affiliated": 5866,
                    "mode": null,
                    "granularity": null
                  },
                  "contents": [
                    "Then you would add these lines to your ",
                    {
                      "$$data_type": "org-node",
                      "type": "verbatim",
                      "ref": "org558fbb0",
                      "properties": {
                        "post-blank": 1,
                        "value": ".hg/hgrc"
                      },
                      "contents": []
                    },
                    "file.\n"
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "src-block",
                  "ref": "orgfc8667b",
                  "properties": {
                    "language": "python",
                    "switches": null,
                    "parameters": null,
                    "number-lines": null,
                    "preserve-indent": false,
                    "retain-labels": true,
                    "use-labels": true,
                    "label-fmt": null,
                    "value": "    [hooks]\n    precommit.checkMetas = python:/pathToUnityRepo/hooks/checkMetas.py:precommit\n",
                    "post-blank": 0,
                    "post-affiliated": 5923,
                    "mode": null,
                    "granularity": null
                  },
                  "contents": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "$$data_type": "org-node",
      "type": "headline",
      "ref": "org1ebbfbe",
      "drawer": {},
      "properties": {
        "tags-all": [],
        "raw-value": "Disclaimer",
        "pre-blank": 0,
        "robust-begin": 6066,
        "robust-end": 6465,
        "level": 1,
        "priority": null,
        "tags": [],
        "todo-keyword": null,
        "todo-type": null,
        "post-blank": 0,
        "footnote-section-p": false,
        "archivedp": false,
        "commentedp": false,
        "post-affiliated": 6051,
        "title": ["Disclaimer"],
        "mode": null,
        "granularity": null
      },
      "contents": [
        {
          "$$data_type": "org-node",
          "type": "section",
          "ref": "org1890276",
          "properties": {
            "robust-begin": 6064,
            "robust-end": 6465,
            "post-blank": 0,
            "post-affiliated": 6064,
            "mode": "section",
            "granularity": null
          },
          "contents": [
            {
              "$$data_type": "org-node",
              "type": "plain-list",
              "ref": "orgfb4f718",
              "properties": {
                "type": "unordered",
                "structure": [
                  [6064, 0, "- ", null, null, null, 6346],
                  [6346, 0, "- ", null, null, null, 6434],
                  [6434, 0, "- ", null, null, null, 6467]
                ],
                "post-blank": 0,
                "post-affiliated": 6064,
                "mode": "planning",
                "granularity": null
              },
              "contents": [
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org344b3ec",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 1,
                    "post-affiliated": 6064,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgaf17619",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 6066,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "This ",
                        {
                          "$$data_type": "org-node",
                          "type": "bold",
                          "ref": "org694654c",
                          "properties": {
                            "post-blank": 0
                          },
                          "contents": [
                            "doesn't handle .meta files for directories"
                          ]
                        },
                        ". I couldn't think of an elegant way\nTo locate directories from the hg API. Mercurial has no concept of them, files are just at paths.\nThis isn't such a big deal since, AFAIK, directories aren't referenced in serialized data.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "orgf4242e1",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 6346,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgb0bc9ae",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 6348,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": [
                        "I don't program in Python much so this likely ",
                        {
                          "$$data_type": "org-node",
                          "type": "bold",
                          "ref": "org6c5f450",
                          "properties": {
                            "post-blank": 0
                          },
                          "contents": ["isn't idiomatic python"]
                        },
                        ". But it works.\n"
                      ]
                    }
                  ]
                },
                {
                  "$$data_type": "org-node",
                  "type": "item",
                  "ref": "org774f64c",
                  "properties": {
                    "bullet": "- ",
                    "checkbox": null,
                    "counter": null,
                    "pre-blank": 0,
                    "post-blank": 0,
                    "post-affiliated": 6434,
                    "tag": [],
                    "mode": "item",
                    "granularity": null
                  },
                  "contents": [
                    {
                      "$$data_type": "org-node",
                      "type": "paragraph",
                      "ref": "orgc8be51f",
                      "properties": {
                        "post-blank": 0,
                        "post-affiliated": 6436,
                        "mode": null,
                        "granularity": null
                      },
                      "contents": ["This script is provided as is.\n"]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
